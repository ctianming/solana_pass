# 域名策略（B）：品牌主域 + 子域

本策略以一个品牌主域（如 `brand.sol`）为根，为每位用户创建子域（如 `<user>.brand.sol`），实现人类可读的标识与统一入口。

## 目标
- 统一品牌形象与入口；
- 兼容 SNS 生态（钱包/浏览器插件/区块浏览器可识别）；
- 便于权限与托管：主域由平台保管，子域授权由程序/后端控制。

## 角色与权限
- 主域 `brand.sol` 的所有者与更新权限（owner / update authority）：平台控制；
- 子域创建：需主域的子域创建权限（registrar/authority）；
- 子域转移：可按业务需要将子域所有权转给用户（可选），或平台持有、用户仅具“指向绑定”（解析记录指向用户公钥）。

## 子域生命周期
1) 创建：`<user>.brand.sol`，解析记录指向用户 Solana 公钥；
2) 绑定更新：当用户更换主钱包，更新解析记录；
3) 回收（可选）：当违反条款或不活跃，平台可回收并保留名称。

## 技术实现要点
- 使用 SNS（Bonfida）合约：
  - 读取：域名→公钥；反向解析：公钥→域名；
  - 子域创建：需主域拥有注册权限；
  - 记录更新：通过 update authority 执行；
- 程序/后端建议：
  - 子域创建由后端代付（Relayer）统一执行；
  - 将子域创建纳入风控（仅通过 SAS 验证的实名/KYC 用户创建）；

## SDK 支持（规划）
- `buildCreateSubdomainTx({ parentDomain, sub, targetPubkey })`：返回创建/设置解析的交易（由后端代付补签）。
- `resolveName(name)` 与 `reverseLookup(pubkey)`：封装 SNS 解析。

## 风控与合规
- 仅通过 SAS 验证的用户可创建子域；
- 速率限制与配额控制，避免滥用；
- 审计日志：记录创建者、IP、时间戳与交易签名。
